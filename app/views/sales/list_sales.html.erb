<h1>Lista de Vendas</h1>

<%= link_to 'Adicionar Venda', new_sale_path %>

<%= form_tag list_sales_sales_path, method: :get do %>
  <div>
    <%= text_field_tag :search_term, params[:search_term], placeholder: 'Digite para pesquisar' %>
    <%= submit_tag 'Pesquisar' %>
  </div>
<% end %>

<% if @sales.present? %>
  <table>
    <thead>
      <tr>
        <th>Nome do comprador</th>
        <th>Descrição do Item</th>
        <th>Preço do Item</th>
        <th>Quantidade</th>
        <th>Endereço do Vendedor</th>
        <th>Nome do Vendedor</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <% @sales.each do |sale| %>
        <tr>
          <td><%= sale.purchaser_name %></td>
          <td><%= sale.item_description %></td>
          <td><%= sale.item_price %></td>
          <td><%= sale.purchase_count %></td>
          <td><%= sale.merchant_address %></td>
          <td><%= sale.merchant_name %></td>
          <td>
            <%= link_to 'Editar', edit_sale_path(sale), class: 'btn btn-primary' %>
            <%= link_to 'Excluir', sale, data: { turbo_method: :delete, turbo_confirm: 'Você tem certeza?' }, class: 'btn btn-danger' %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>Nenhum resultado encontrado para a pesquisa.</p>
<% end %>
